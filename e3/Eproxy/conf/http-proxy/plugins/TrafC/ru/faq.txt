
Q10  где взять описание основного лога Eproxy,  всех этих:
     -TCP_CLIENT_REFRESH/200, -TCP_HIT/200, -TCP_MISS/200, -TCP_REFRESH_HIT/200 и т.п.


TCP_MISS            - контент взят с сервера
TCP_HIT             - контент взят из кэша
TCP_REFRESH_HIT     - контент не изменился на сервере и взят из кэша прокси
TCP_REFRESH_BHIT    - 'B' - 'Browser' - объект был в кэше браузера
TCP_REFRESH_MISS    - контент изменился и взят с сервера
TCP_CLIENT_REFRESH  - контент взят с сервера (обновлен) по запросу клиента

Описании  HTTP-протокола - www.frc-editor.org 
Используемый формат лога совместим с логами Squid
список анализаторов лога: http://eproxy:3140/conf/ru/stat.html

В обычной строке http-proxy-лога последовательно идут:

{UNIXDATE}
  - дата в юникс-формате (число секунд от 1.1.1970,
    дань совместимости с анализаторами лога ).

{ELAPSED}
  - ушло ms на выполнение запроса

{CLIENT}
  - IP клиента

{ACTION}/{vHttpReplyCode}
  - действие/КодОтвета

{CLIENT-WRITTEN}
  - отправлено клиенту, байт

{METHOD}
  - HTTP-метод

{URL}
  - Запрошенный URL

{User-}
  - имя пользователя, или "-", если пользователь не установлен.

{HIERARCHY}/{FROM-HOST}
  - иерархия_прокси/от какого хоста пришел ответ.

{CONTENT-TYPE}
  - тип контента (или "-", если не установлен).

В конце каждой строки стандартного лога

  CurrentThreadNumber:ClientSocket:CurrentThreadQuantity:SocketQuantity
  НомерПотока:СокетКлиента:КоличествоПотоков:КоличествоСокетов


---
Q11 как пользоваться плагином: plugins\monitoring ???

1. Подключить его в conf\OnStartupPlugins.rules.txt (или через web-интерфейс)
2. Перезапустить eproxy
3. Запросить в браузере URL  http://eproxy:3130/monitor.txt

Этот плагин просто выдает все происходящие записи лога stdout клиенту (в браузер).

 Да, и еще: если подключен плагин console, то stdout-лог идет в консоль (а не в файл),
 и этот плагин не работает, т.к. он отдает то, что идет в лог-файл.

---
Q12 Нужна ли точка AuthSources.rules.txt (AuthSource: "Proxy Access NT" auth_nt . )

Для NT4  - точка не нужна.

Там записывается имя сервера авторизации.
"." - означает - локальная машина (localhost).
Пустое имя - тоже означает локальную машину.

НО  На системе NT4 SP5  точка "." - не распознается функциями API
как ссылка на локальную машину и авторизация не работает.
Пустое имя - работает.


---
Q13 Как улучшить работу кэша?


pig, Пт Янв 17, 2003 (http://forum.etype.net/viewtopic.php?t=1387)
_________________________________________________
Вот, собрался с силами и мыслями, и наваял: 
Код: 

IsCachedFile DUP 
| FileIsOlderThan: 0 URL =~ *.jpg URL =~ *.gif OR URL =~ *.png OR 0= OR | DROP RefreshCache \EOF
| SendFromCache \EOF


Файлы с расширениями .jpg, .fig и .png кэширует в режиме CheckIfOlder, а остальное в режиме Standard. 

Залетало с реактивной скоростью, а информация актуальна. 
_________________________________________________

Править файл кофнигурации кэша:  conf\http-proxy\plugins\cache\OnRequest.rules.txt
 
